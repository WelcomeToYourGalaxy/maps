<!DOCTYPE html>
<html>
<head><script src="gdpr/gdprscript.js?buildTime=1234"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Animal Sacrifice Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
        }
        
        /* Single wrapper that contains everything */
        .map-wrapper {
            position: relative;
            width: 100%;
            height: 600px;
            overflow: hidden;
        }
        
        #map { 
            width: 100%;
            height: 100%;
            background: #333;
        }
        
        /* Overlays positioned relative to .map-wrapper */
        .info-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 8px;
            z-index: 1000;
            max-width: 300px;
        }
        
        .info-panel h2 {
            margin: 0 0 5px 0;
            font-size: 18px;
            color: #fff;
        }
        
        .info-panel p {
            margin: 0;
            font-size: 12px;
            color: #ccc;
        }
        
        .filters {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .filter-btn {
            background: #444;
            border: 1px solid #666;
            color: #fff;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s;
        }
        
        .filter-btn:hover { background: #555; }
        .filter-btn.active { background: #4CAF50; border-color: #4CAF50; }
        
        .stats {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            padding: 10px 15px;
            border-radius: 8px;
            z-index: 1000;
            font-size: 14px;
        }
        
        .stats div { margin: 3px 0; }
        .stats strong { color: #4CAF50; }
        
        .marker-islamic { background: rgba(76,175,80,0.9); }
        .marker-hindu { background: rgba(255,152,0,0.9); }
        .marker-afrocaribbean { background: rgba(244,67,54,0.9); }
        .marker-jewish { background: rgba(33,150,243,0.9); }
        .marker-yoruba { background: rgba(156,39,176,0.9); }
        .marker-african { background: rgba(255,87,34,0.9); }
        .marker-pacific { background: rgba(0,188,212,0.9); }
        .marker-shamanic { background: rgba(0,150,136,0.9); }
        .marker-orthodox { background: rgba(121,85,72,0.9); }
        .marker-armenian { background: rgba(205,92,92,0.9); }
        .marker-chinese { background: rgba(255,193,7,0.9); }
        .marker-malagasy { background: rgba(139,69,19,0.9); }
        .marker-andean { background: rgba(184,134,11,0.9); }
        .marker-mongolian { background: rgba(103,58,183,0.9); }
        .marker-shinto { background: rgba(233,30,99,0.9); }
        
        .custom-marker {
            border: 2px solid #fff;
            border-radius: 50%;
            width: 12px;
            height: 12px;
        }
        
        .leaflet-popup-content-wrapper {
            background: rgba(0,0,0,0.95);
            color: #fff;
            border-radius: 8px;
        }
        
        .leaflet-popup-content { margin: 12px; font-size: 13px; }
        .popup-title { font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #4CAF50; }
        .popup-location { margin-bottom: 5px; }
        .popup-sources { font-size: 11px; color: #aaa; margin-top: 8px; padding-top: 8px; border-top: 1px solid #444; }
        
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            border-radius: 8px;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="map-wrapper">
        <div id="loading">Loading map...
        <div id="map">
        <div class="info-panel">
            <h2>Animal Sacrifice Map</h2>
            <p>207 verified locations worldwide</p>
            <div class="filters" id="filters">
        
        <div class="stats" id="stats">
            <div><strong id="count">207</strong> Locations
            <div><strong>60+</strong> Countries
        
    
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <script>
        const locations = [
            // HINDU - NEPAL (3)
            {name: "Gadhimai Temple", city: "Bariyarpur", country: "Nepal", lat: 27.0333, lng: 85.1333, category: "hindu", source: "TIME 2024; Wikipedia; Animal Equality"},
            {name: "Dakshinkali Temple", city: "Kathmandu", country: "Nepal", lat: 27.6286, lng: 85.2961, category: "hindu", source: "We Animals 2024; Wikipedia"},
            {name: "Rajdevi Temple", city: "Janakpur", country: "Nepal", lat: 26.7286, lng: 85.9248, category: "hindu", source: "Nepal Live Today; 14-15k goats/year"},
            // HINDU - INDIA (20 temples)
            {name: "Kamakhya Temple", city: "Assam", country: "India", lat: 26.1653, lng: 91.7054, category: "hindu", source: "Wikipedia 2025; Urban (Religions S Asia)"},
            {name: "Kandhen Budhi Temple", city: "Odisha", country: "India", lat: 20.8333, lng: 84.2167, category: "hindu", source: "Wikipedia; Studocu 2025"},
            {name: "Samaleswari Temple", city: "Odisha", country: "India", lat: 21.4667, lng: 83.9667, category: "hindu", source: "Wikipedia"},
            {name: "Kodungallur Bhagavathy", city: "Kerala", country: "India", lat: 10.2258, lng: 76.2000, category: "hindu", source: "Wikipedia"},
            {name: "Attukal Bhagavathy", city: "Kerala", country: "India", lat: 8.5078, lng: 76.9489, category: "hindu", source: "Wikipedia"},
            {name: "Ahobilam Temples", city: "Andhra Pradesh", country: "India", lat: 15.1500, lng: 78.4333, category: "hindu", source: "Wikipedia"},
            {name: "Kalighat Kali Temple", city: "Kolkata", country: "India", lat: 22.5186, lng: 88.3426, category: "hindu", source: "UBC Library; Daily sacrifice"},
            {name: "Tarapith Temple", city: "West Bengal", country: "India", lat: 24.1167, lng: 87.9667, category: "hindu", source: "Academic refs"},
            {name: "Durgabari Temple", city: "Tripura", country: "India", lat: 23.8333, lng: 91.2667, category: "hindu", source: "Business Standard 2018"},
            {name: "Durga Puja Sites", city: "Kolkata Metro", country: "India", lat: 22.5726, lng: 88.3639, category: "hindu", source: "Cambridge J Asian Studies 2010"},
            {name: "Durga Puja Sites", city: "West Bengal", country: "India", lat: 23.5000, lng: 88.0000, category: "hindu", source: "Fuller 2004; Navratri"},
            {name: "Tulja Bhavani Temple", city: "Maharashtra", country: "India", lat: 18.0089, lng: 76.1356, category: "hindu", source: "Wikipedia"},
            {name: "Chamundeshwari Temple", city: "Mysore", country: "India", lat: 12.2714, lng: 76.6725, category: "hindu", source: "Wikipedia"},
            {name: "Bahuchara Mata Temple", city: "Gujarat", country: "India", lat: 23.5204, lng: 71.4084, category: "hindu", source: "Wikipedia"},
            {name: "Samayapuram Mariamman", city: "Trichy, Tamil Nadu", country: "India", lat: 10.8761, lng: 78.8917, category: "hindu", source: "Hindupedia; Good 2004; Alamy"},
            {name: "Kallalagar Temple", city: "Tamil Nadu", country: "India", lat: 10.0500, lng: 78.1200, category: "hindu", source: "Wikipedia (Animal sacrifice in Hinduism)"},
            {name: "Tamil Mariamman Shrines", city: "Tamil Nadu Villages", country: "India", lat: 11.0000, lng: 78.0000, category: "hindu", source: "Good 2004; Living in Embrace blog; Alamy"},
            {name: "Durga Temples", city: "Bihar", country: "India", lat: 25.5941, lng: 85.1376, category: "hindu", source: "Fuller 2004"},
            {name: "Kali Temples", city: "Jharkhand", country: "India", lat: 23.3441, lng: 85.3096, category: "hindu", source: "Regional practices"},
            {name: "Mahalakshmi Temple", city: "Mumbai", country: "India", lat: 18.9744, lng: 72.8088, category: "hindu", source: "Wikipedia"},
            {name: "Yellamma Temple", city: "Belagavi, Karnataka", country: "India", lat: 15.9204, lng: 74.5865, category: "hindu", source: "InUth 2017; Incredible India; Tripadvisor; Hill Post 2020"},
            {name: "Renuka Temples", city: "Karnataka", country: "India", lat: 15.3173, lng: 75.7139, category: "hindu", source: "Wikipedia Animal Sacrifice; Fuller 2004"},
            // ISLAMIC - MIDDLE EAST (16)
            {name: "Qurbani Mina", city: "Mecca", country: "Saudi Arabia", lat: 21.4125, lng: 39.8926, category: "islamic", source: "Muslim Hands 2024"},
            {name: "Qurbani Mecca", city: "Mecca", country: "Saudi Arabia", lat: 21.4225, lng: 39.8262, category: "islamic", source: "Haramain.com"},
            {name: "Eid al-Adha", city: "Tehran", country: "Iran", lat: 35.6892, lng: 51.3890, category: "islamic", source: "ProFarsi 2025; CSMonitor 2016"},
            {name: "Eid al-Adha", city: "Isfahan", country: "Iran", lat: 32.6546, lng: 51.6680, category: "islamic", source: "Wikipedia; Living in Tehran"},
            {name: "Eid al-Adha", city: "Baghdad", country: "Iraq", lat: 33.3152, lng: 44.3661, category: "islamic", source: "Wikipedia; Islamic Relief"},
            {name: "Eid al-Adha", city: "Kabul", country: "Afghanistan", lat: 34.5553, lng: 69.2075, category: "islamic", source: "Islamic Relief; Wikipedia"},
            {name: "Eid al-Adha", city: "Damascus", country: "Syria", lat: 33.5138, lng: 36.2765, category: "islamic", source: "Wikipedia; Middle East Eye"},
            {name: "Eid al-Adha", city: "Amman", country: "Jordan", lat: 31.9454, lng: 35.9284, category: "islamic", source: "Islamic Relief; Wikipedia"},
            {name: "Eid al-Adha", city: "Beirut", country: "Lebanon", lat: 33.8938, lng: 35.5018, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Ramallah", country: "Palestine", lat: 31.9038, lng: 35.2034, category: "islamic", source: "Middle East Eye"},
            {name: "Eid al-Adha", city: "Sana'a", country: "Yemen", lat: 15.3694, lng: 44.1910, category: "islamic", source: "Islamic Relief"},
            {name: "Eid al-Adha", city: "Muscat", country: "Oman", lat: 23.5880, lng: 58.3829, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Dubai", country: "UAE", lat: 25.2048, lng: 55.2708, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Doha", country: "Qatar", lat: 25.2854, lng: 51.5310, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Kuwait City", country: "Kuwait", lat: 29.3759, lng: 47.9774, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Manama", country: "Bahrain", lat: 26.2285, lng: 50.5860, category: "islamic", source: "Wikipedia"},
            // ISLAMIC - NORTH AFRICA (8)
            {name: "Eid al-Adha", city: "Cairo", country: "Egypt", lat: 30.0444, lng: 31.2357, category: "islamic", source: "Britannica"},
            {name: "Eid al-Adha", city: "Casablanca", country: "Morocco", lat: 33.5731, lng: -7.5898, category: "islamic", source: "Open Doors Morocco 2025"},
            {name: "Eid al-Adha", city: "Tunis", country: "Tunisia", lat: 36.8065, lng: 10.1815, category: "islamic", source: "Islamic Relief; Wikipedia"},
            {name: "Eid al-Adha", city: "Algiers", country: "Algeria", lat: 36.7538, lng: 3.0588, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Tripoli", country: "Libya", lat: 32.8872, lng: 13.1913, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Khartoum", country: "Sudan", lat: 15.5007, lng: 32.5599, category: "islamic", source: "Islamic Relief; Wikipedia"},
            {name: "Eid al-Adha", city: "Mogadishu", country: "Somalia", lat: 2.0469, lng: 45.3182, category: "islamic", source: "Islamic Relief"},
            {name: "Eid al-Adha", city: "Nouakchott", country: "Mauritania", lat: 18.0735, lng: -15.9582, category: "islamic", source: "Wikipedia"},
            // ISLAMIC - SUB-SAHARAN AFRICA (14)
            {name: "Tabaski", city: "Dakar", country: "Senegal", lat: 14.6928, lng: -17.4467, category: "islamic", source: "UCLA; Georgetown; NCR 2024; Quartz; ICWA"},
            {name: "Tabaski", city: "Bamako", country: "Mali", lat: 12.6392, lng: -8.0029, category: "islamic", source: "The World/PRX; Moving Mali Forward; Office Holidays"},
            {name: "Tabaski", city: "Mopti", country: "Mali", lat: 14.4843, lng: -4.1830, category: "islamic", source: "The World/PRX 2017"},
            {name: "Tabaski", city: "Timbuktu", country: "Mali", lat: 16.7753, lng: -3.0028, category: "islamic", source: "The World/PRX 2017"},
            {name: "Tobaski", city: "Banjul", country: "Gambia", lat: 13.4549, lng: -16.5790, category: "islamic", source: "My Gambia; PublicHolidays; Office Holidays; TripAdvisor; Medium/SCU"},
            {name: "Tabaski", city: "Conakry", country: "Guinea", lat: 9.6412, lng: -13.5784, category: "islamic", source: "Office Holidays; EBSCO; Festivals Guinea; ICWA"},
            {name: "Tabaski", city: "Ouagadougou", country: "Burkina Faso", lat: 12.3714, lng: -1.5197, category: "islamic", source: "Office Holidays; Africanews 2021; TimeAndDate; iExplore"},
            {name: "Tabaski", city: "Djibo", country: "Burkina Faso", lat: 14.1008, lng: -1.6297, category: "islamic", source: "Alamy photo documentation"},
            {name: "Tabaski", city: "Abidjan", country: "Côte d'Ivoire", lat: 5.3600, lng: -4.0083, category: "islamic", source: "Reuters 2006; Office Holidays; Getty Images; PublicHolidays"},
            {name: "Eid al-Adha", city: "Lagos", country: "Nigeria", lat: 6.5244, lng: 3.3792, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "N'Djamena", country: "Chad", lat: 12.1348, lng: 15.0557, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Niamey", country: "Niger", lat: 13.5116, lng: 2.1254, category: "islamic", source: "Wikipedia; LIFE NGO; Africanews"},
            {name: "Eid al-Adha", city: "Mombasa", country: "Kenya", lat: -4.0435, lng: 39.6682, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "Dar es Salaam", country: "Tanzania", lat: -6.7924, lng: 39.2083, category: "islamic", source: "Islamic Relief"},
            {name: "Eid al-Adha", city: "Zanzibar", country: "Tanzania", lat: -6.1659, lng: 39.2026, category: "islamic", source: "Wikipedia"},
            {name: "Tabaski", city: "Freetown", country: "Sierra Leone", lat: 8.4657, lng: -13.2317, category: "islamic", source: "TimeAndDate; PublicHolidays; Office Holidays"},
            // ISLAMIC - BALKANS/EUROPE (3)
            {name: "Kurban Bajram", city: "Tirana", country: "Albania", lat: 41.3275, lng: 19.8187, category: "islamic", source: "RTSH 2025; Tirana Times; Islam in Albania Wikipedia"},
            {name: "Kurban Bajram", city: "Sarajevo", country: "Bosnia", lat: 43.8563, lng: 18.4131, category: "islamic", source: "YES Abroad; Alamy; Sarajevo Times; Office Holidays"},
            {name: "Kurban Bayrami", city: "Pristina", country: "Kosovo", lat: 42.6629, lng: 21.1655, category: "islamic", source: "Counting The Days; Türkiye Today; TimeAndDate"},
            // ISLAMIC - SOUTH/CENTRAL ASIA (8)
            {name: "Eid al-Adha", city: "Dhaka", country: "Bangladesh", lat: 23.8103, lng: 90.4125, category: "islamic", source: "Islamic Relief"},
            {name: "Eid al-Adha", city: "Karachi", country: "Pakistan", lat: 24.8607, lng: 67.0011, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "Delhi", country: "India", lat: 28.7041, lng: 77.1025, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "Baku", country: "Azerbaijan", lat: 40.4093, lng: 49.8671, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Tashkent", country: "Uzbekistan", lat: 41.2995, lng: 69.2401, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Dushanbe", country: "Tajikistan", lat: 38.5598, lng: 68.7738, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Bishkek", country: "Kyrgyzstan", lat: 42.8746, lng: 74.5698, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Almaty", country: "Kazakhstan", lat: 43.2220, lng: 76.8512, category: "islamic", source: "Wikipedia"},
            // ISLAMIC - SOUTHEAST ASIA (6)
            {name: "Eid al-Adha", city: "Jakarta", country: "Indonesia", lat: -6.2088, lng: 106.8456, category: "islamic", source: "Islamic Relief"},
            {name: "Eid al-Adha", city: "Kuala Lumpur", country: "Malaysia", lat: 3.1390, lng: 101.6869, category: "islamic", source: "Penny Appeal"},
            {name: "Kurban Bayrami", city: "Istanbul", country: "Turkey", lat: 41.0082, lng: 28.9784, category: "islamic", source: "Turkish Travel Blog 2014"},
            {name: "Kurban Bayrami", city: "Ankara", country: "Turkey", lat: 39.9334, lng: 32.8597, category: "islamic", source: "Property Turkey"},
            {name: "Eid al-Adha", city: "Bandar Seri Begawan", country: "Brunei", lat: 4.9031, lng: 114.9398, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Malé", country: "Maldives", lat: 4.1755, lng: 73.5093, category: "islamic", source: "Wikipedia"},
            // AFRO-CARIBBEAN - USA SANTERÍA (8)
            {name: "Church of Lukumi", city: "Hialeah, FL", country: "USA", lat: 25.8576, lng: -80.2781, category: "afrocaribbean", source: "Lukumi v. Hialeah 1993"},
            {name: "Santería Practices", city: "Bronx, NY", country: "USA", lat: 40.8448, lng: -73.8648, category: "afrocaribbean", source: "Vidal-Ortiz 2009"},
            {name: "Santería Practices", city: "Brooklyn, NY", country: "USA", lat: 40.6782, lng: -73.9442, category: "afrocaribbean", source: "Vidal-Ortiz 2009"},
            {name: "Santería Practices", city: "Manhattan, NY", country: "USA", lat: 40.7831, lng: -73.9712, category: "afrocaribbean", source: "Vidal-Ortiz 2009"},
            {name: "Santería District", city: "Miami, FL", country: "USA", lat: 25.7653, lng: -80.2201, category: "afrocaribbean", source: "Lammoglia St. Thomas Law"},
            {name: "Santería Practices", city: "Miami South, FL", country: "USA", lat: 25.6145, lng: -80.3089, category: "afrocaribbean", source: "Miami Herald 2003"},
            {name: "Santería Practices", city: "San Antonio, TX", country: "USA", lat: 29.4241, lng: -98.4936, category: "afrocaribbean", source: "SA Express 2018"},
            {name: "Santería Practices", city: "Houston, TX", country: "USA", lat: 29.7604, lng: -95.3698, category: "afrocaribbean", source: "Anthropoetics UCLA 2003"},
            // AFRO-CARIBBEAN - CUBA (5)
            {name: "Santería Practices", city: "Havana", country: "Cuba", lat: 23.1136, lng: -82.3666, category: "afrocaribbean", source: "Wikipedia; Britannica; Anywhere"},
            {name: "Santería Practices", city: "Matanzas", country: "Cuba", lat: 23.0414, lng: -81.5775, category: "afrocaribbean", source: "Wikipedia; Anywhere"},
            {name: "Santería Practices", city: "Santiago de Cuba", country: "Cuba", lat: 20.0247, lng: -75.8219, category: "afrocaribbean", source: "Anywhere"},
            {name: "Regla District", city: "Havana", country: "Cuba", lat: 23.1167, lng: -82.3167, category: "afrocaribbean", source: "Anywhere; Wikipedia"},
            {name: "Guanabacoa", city: "Havana Metro", country: "Cuba", lat: 23.1167, lng: -82.3000, category: "afrocaribbean", source: "Anywhere"},
            // AFRO-CARIBBEAN - CARIBBEAN/AMERICAS (10)
            {name: "Santería Practices", city: "Veracruz", country: "Mexico", lat: 19.1738, lng: -96.1342, category: "afrocaribbean", source: "Wikipedia (1994 festival)"},
            {name: "Candomblé Terreiros", city: "Caruaru", country: "Brazil", lat: -8.2838, lng: -35.9761, category: "afrocaribbean", source: "Léo Neto J Ethnobiology 2009"},
            {name: "Candomblé Terreiros", city: "Campina Grande", country: "Brazil", lat: -7.2306, lng: -35.8811, category: "afrocaribbean", source: "Léo Neto 2009"},
            {name: "Terreiro Ilê Oba", city: "Salvador", country: "Brazil", lat: -12.9714, lng: -38.5014, category: "afrocaribbean", source: "Harvard ReVista"},
            {name: "Candomblé Terreiros", city: "Rio de Janeiro", country: "Brazil", lat: -22.9068, lng: -43.1729, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Vodou Ounfòs", city: "Port-au-Prince", country: "Haiti", lat: 18.5944, lng: -72.3074, category: "afrocaribbean", source: "Wikipedia; Nat Geo 2025"},
            {name: "La Souvenance", city: "Gonaïves", country: "Haiti", lat: 19.4469, lng: -72.6876, category: "afrocaribbean", source: "Cave webster.edu"},
            {name: "Vodou Practices", city: "Petit Goâve", country: "Haiti", lat: 18.4333, lng: -72.8667, category: "afrocaribbean", source: "Cave webster.edu"},
            {name: "St. John Caves", city: "Saint-Michel", country: "Haiti", lat: 19.3867, lng: -72.3364, category: "afrocaribbean", source: "Smithsonian 2017"},
            {name: "Plaine du Nord", city: "Cap-Haïtien", country: "Haiti", lat: 19.6658, lng: -72.0564, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Saut d'Eau", city: "Ville-Bonheur", country: "Haiti", lat: 18.8486, lng: -72.1614, category: "afrocaribbean", source: "Wikipedia"},
            // YORUBA/IFA (7)
            {name: "Ile-Ife Ifa Practices", city: "Ile-Ife", country: "Nigeria", lat: 7.4667, lng: 4.5500, category: "yoruba", source: "Wikipedia (Ifa); UNESCO 2005"},
            {name: "Osun-Osogbo Grove", city: "Osogbo", country: "Nigeria", lat: 7.7667, lng: 4.5500, category: "yoruba", source: "UNESCO World Heritage"},
            {name: "Yoruba Practices", city: "Lagos", country: "Nigeria", lat: 6.5244, lng: 3.3792, category: "yoruba", source: "AMAMIHE 2020"},
            {name: "Yoruba Practices", city: "Oyo", country: "Nigeria", lat: 7.8500, lng: 3.9333, category: "yoruba", source: "Wikipedia (Yoruba religion)"},
            {name: "Fá Practices", city: "Porto-Novo", country: "Benin", lat: 6.4969, lng: 2.6289, category: "yoruba", source: "Wikipedia (Ifa); Church of Ifa"},
            {name: "Fá Practices", city: "Ouidah", country: "Benin", lat: 6.3633, lng: 2.0850, category: "yoruba", source: "Wikipedia (Ifa)"},
            {name: "Fá Practices", city: "Cotonou", country: "Benin", lat: 6.3654, lng: 2.4183, category: "yoruba", source: "Church of Ifa 2024"},
            // JEWISH - KAPAROT (4)
            {name: "Kaparot Crown Heights", city: "Brooklyn, NY", country: "USA", lat: 40.6693, lng: -73.9422, category: "jewish", source: "We Animals 2024; JTA 2013"},
            {name: "Kaparot Borough Park", city: "Brooklyn, NY", country: "USA", lat: 40.6341, lng: -73.9973, category: "jewish", source: "Brandeis"},
            {name: "Kaparot Williamsburg", city: "Brooklyn, NY", country: "USA", lat: 40.7081, lng: -73.9571, category: "jewish", source: "Wikipedia; We Animals"},
            {name: "Kaparot Upper West", city: "Manhattan, NY", country: "USA", lat: 40.7870, lng: -73.9754, category: "jewish", source: "UPC 2023"},
            // AFRICAN TRADITIONAL (7)
            {name: "Ukweshwama Festival", city: "Nongoma", country: "South Africa", lat: -27.8833, lng: 31.6500, category: "african", source: "Cambridge J Law & Religion 2018"},
            {name: "Zulu Practices", city: "KwaZulu-Natal", country: "South Africa", lat: -28.5305, lng: 30.8958, category: "african", source: "Berglund 1976"},
            {name: "Xhosa Practices", city: "Eastern Cape", country: "South Africa", lat: -32.2968, lng: 26.4194, category: "african", source: "Buhrmann 1987"},
            {name: "Luo Birth Rituals", city: "Nyanza", country: "Kenya", lat: -0.0917, lng: 34.7679, category: "african", source: "The Blood Project 2025"},
            {name: "Kikuyu Practices", city: "Central Kenya", country: "Kenya", lat: -0.4172, lng: 36.9566, category: "african", source: "Magesa 1997"},
            {name: "Acholi Reconciliation", city: "Northern Uganda", country: "Uganda", lat: 2.7750, lng: 32.2922, category: "african", source: "Docus 2017; Mbiti 2008"},
            {name: "Swazi Incwala", city: "Lobamba", country: "Eswatini", lat: -26.4667, lng: 31.2000, category: "african", source: "Biedelman JSTOR"},
            // SHINTO/AINU (2)
            {name: "Suwa Taisha", city: "Nagano", country: "Japan", lat: 36.0592, lng: 138.1150, category: "shinto", source: "Green Shinto 2015"},
            {name: "Ainu Iomante", city: "Hokkaido", country: "Japan", lat: 43.0642, lng: 141.3469, category: "shinto", source: "Wikipedia (Iomante)"},
            // PACIFIC ISLANDS (8)
            {name: "Galungan Festival", city: "Ubud, Bali", country: "Indonesia", lat: -8.5069, lng: 115.2625, category: "pacific", source: "Wikipedia; Bali.com 2025"},
            {name: "Galungan Festival", city: "Denpasar, Bali", country: "Indonesia", lat: -8.6705, lng: 115.2126, category: "pacific", source: "FINNS Beach Club; BaliSpirit"},
            {name: "Ceremonial Feasts", city: "Nuku'alofa", country: "Tonga", lat: -21.1789, lng: -175.1982, category: "pacific", source: "M/C Journal 2010"},
            {name: "Ceremonial Feasts", city: "Suva", country: "Fiji", lat: -18.1248, lng: 178.4501, category: "pacific", source: "Edge of Humanity 2024"},
            {name: "Ceremonial Feasts", city: "Apia", country: "Samoa", lat: -13.8506, lng: -171.7513, category: "pacific", source: "Edge of Humanity 2024"},
            {name: "Heiau Sacrifices", city: "Hawaii Island", country: "USA", lat: 19.5429, lng: -155.6659, category: "pacific", source: "UCL 2025 (pre-contact; historical)"},
            {name: "Ifugao Rituals", city: "Banaue", country: "Philippines", lat: 16.9167, lng: 121.0583, category: "pacific", source: "J Archaeological Science 2017"},
            {name: "Maring Pig Festival", city: "Madang", country: "Papua New Guinea", lat: -5.2000, lng: 145.8000, category: "pacific", source: "UC San Diego Rappaport Papers"},
            {name: "Kastom Pig Sacrifice", city: "Port Vila", country: "Vanuatu", lat: -17.7333, lng: 168.3167, category: "pacific", source: "National Museum Wikipedia; Religion in Vanuatu Wikipedia"},
            {name: "Grade-Taking Ceremony", city: "Ambrym Island", country: "Vanuatu", lat: -16.2500, lng: 168.1167, category: "pacific", source: "Julie Bradley 2021; Culture of Vanuatu Wikipedia"},
            // MONGOLIAN (2)
            {name: "Ovoo Ceremonies", city: "Ulaanbaatar", country: "Mongolia", lat: 47.8864, lng: 106.9057, category: "mongolian", source: "Wikipedia (Mongolian shamanism)"},
            {name: "Ovoo Ceremonies", city: "Inner Mongolia", country: "China", lat: 43.6538, lng: 116.4750, category: "mongolian", source: "China Today; Lindskog 2016"},
            // EAST ASIAN SHAMANIC (8)
            {name: "Hmong/Yao Practices", city: "Sapa", country: "Vietnam", lat: 22.3364, lng: 103.8438, category: "shamanic", source: "Garber & Turner SAGE 2023"},
            {name: "Hmong/Yao Practices", city: "Ha Giang", country: "Vietnam", lat: 22.8231, lng: 104.9784, category: "shamanic", source: "Bonnin 2011; Sowerwine 2004"},
            {name: "Bahnar Buffalo Ritual", city: "Kon Tum", country: "Vietnam", lat: 14.3497, lng: 108.0005, category: "shamanic", source: "Vietnam Law Magazine"},
            {name: "Bahnar Buffalo Ritual", city: "Gia Lai", country: "Vietnam", lat: 13.9833, lng: 108.0000, category: "shamanic", source: "Vietnam Law Magazine"},
            {name: "Miao Zhuiniu Ritual", city: "Wuling Mts, Hunan", country: "China", lat: 28.3167, lng: 109.7389, category: "shamanic", source: "MDPI Religions 2022"},
            {name: "Memba Rituals", city: "Menchuka, Arunachal Pradesh", country: "India", lat: 28.7708, lng: 94.5167, category: "shamanic", source: "Saudi J Humanities 2017"},
            {name: "Mudang Kut Rituals", city: "Seoul", country: "South Korea", lat: 37.5665, lng: 126.9780, category: "shamanic", source: "Wikipedia; Sarfati 2022"},
            {name: "Mudang Kut Rituals", city: "Korean Peninsula", country: "South Korea", lat: 36.5, lng: 127.5, category: "shamanic", source: "Kendall 1987; 200k+ shamans"},
            // ORTHODOX CHRISTIAN (3)
            {name: "Kourbania Practice", city: "Greek Villages", country: "Greece", lat: 39.0742, lng: 21.8243, category: "orthodox", source: "Wikipedia; OrthodoxWiki"},
            {name: "St. Charalambos", city: "Lesbos", country: "Greece", lat: 39.1000, lng: 26.2500, category: "orthodox", source: "Wikipedia (Kourbania)"},
            {name: "Akindinoi Saints", city: "Mistegna, Lesbos", country: "Greece", lat: 39.2500, lng: 26.3000, category: "orthodox", source: "Wikipedia (Kourbania)"},
            // ARMENIAN CHRISTIAN (4)
            {name: "Matagh Ceremonies", city: "Yerevan", country: "Armenia", lat: 40.1792, lng: 44.4991, category: "armenian", source: "Wikipedia; Iconic Hand 2017"},
            {name: "Geghard Monastery", city: "Kotayk", country: "Armenia", lat: 40.1401, lng: 44.8192, category: "armenian", source: "The Iconic Hand 2017"},
            {name: "Etchmiadzin", city: "Vagharshapat", country: "Armenia", lat: 40.1638, lng: 44.2914, category: "armenian", source: "Armenian Weekly 2019"},
            {name: "Matagh (Diaspora)", city: "Glendale, CA", country: "USA", lat: 34.1425, lng: -118.2551, category: "armenian", source: "LA Times 2015; epostle"},
            // CHINESE FOLK RELIGION (4)
            {name: "Shen Zhu Festival", city: "Hsinchu", country: "Taiwan", lat: 24.8382, lng: 121.0177, category: "chinese", source: "Wikipedia; ENN 2005"},
            {name: "Yimin Festival", city: "Pingzhen", country: "Taiwan", lat: 24.9441, lng: 121.2157, category: "chinese", source: "Josh Ellis Photography 2016"},
            {name: "Raza Festival", city: "Gansu", country: "China", lat: 37.5000, lng: 102.5000, category: "chinese", source: "Cultural & Religious Studies 2021"},
            {name: "Temple of Heaven", city: "Beijing", country: "China", lat: 39.8822, lng: 116.4066, category: "chinese", source: "Christianity Today 2023; Historical"},
            // MALAGASY (3)
            {name: "Famadihana Rituals", city: "Antananarivo Highlands", country: "Madagascar", lat: -18.8792, lng: 47.5079, category: "malagasy", source: "Wikipedia; RFI 2025"},
            {name: "Famadihana Rituals", city: "Ambohidranandriana", country: "Madagascar", lat: -19.8000, lng: 47.0000, category: "malagasy", source: "Yahoo News 2025"},
            {name: "Circumcision Ceremonies", city: "Nationwide", country: "Madagascar", lat: -18.7669, lng: 46.8691, category: "malagasy", source: "Natura Travel 2020; FreeBird"},
            // ANDEAN (5)
            {name: "Pachamama Rituals", city: "Cusco", country: "Peru", lat: -13.5319, lng: -71.9675, category: "andean", source: "Smithsonian 2015; TreXperience"},
            {name: "Pachamama Rituals", city: "Puno", country: "Peru", lat: -15.8402, lng: -70.0219, category: "andean", source: "Wikipedia; Machu Travel Peru"},
            {name: "Pachamama Rituals", city: "Ausangate", country: "Peru", lat: -13.7883, lng: -71.2436, category: "andean", source: "Smithsonian 2015"},
            {name: "Pachamama Rituals", city: "La Paz", country: "Bolivia", lat: -16.5000, lng: -68.1500, category: "andean", source: "Wikipedia; Local Trekkers"},
            {name: "Inca Rituals", city: "Tambo Viejo", country: "Peru", lat: -15.4333, lng: -74.6167, category: "andean", source: "Cambridge Antiquity 2020"},
            // ISLAMIC - ADDITIONAL CITIES (10)
            {name: "Eid al-Adha", city: "Riyadh", country: "Saudi Arabia", lat: 24.7136, lng: 46.6753, category: "islamic", source: "Wikipedia; Islamic Relief"},
            {name: "Eid al-Adha", city: "Najaf", country: "Iraq", lat: 32.0007, lng: 44.3319, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Rabat", country: "Morocco", lat: 34.0209, lng: -6.8416, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Lahore", country: "Pakistan", lat: 31.5497, lng: 74.3436, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "Mumbai", country: "India", lat: 19.0760, lng: 72.8777, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "Hyderabad", country: "India", lat: 17.3850, lng: 78.4867, category: "islamic", source: "Penny Appeal"},
            {name: "Eid al-Adha", city: "Surabaya", country: "Indonesia", lat: -7.2575, lng: 112.7521, category: "islamic", source: "Islamic Relief"},
            {name: "Eid al-Adha", city: "Abuja", country: "Nigeria", lat: 9.0765, lng: 7.3986, category: "islamic", source: "Wikipedia"},
            {name: "Eid al-Adha", city: "Nairobi", country: "Kenya", lat: -1.2864, lng: 36.8172, category: "islamic", source: "Middle East Eye"},
            {name: "Eid al-Adha", city: "Addis Ababa", country: "Ethiopia", lat: 9.0320, lng: 38.7469, category: "islamic", source: "Islamic Relief"},
            // AFRO-CARIBBEAN - ADDITIONAL USA (3)
            {name: "Santería Practices", city: "Tampa, FL", country: "USA", lat: 27.9506, lng: -82.4572, category: "afrocaribbean", source: "Tampa Bay Times"},
            {name: "Santería Practices", city: "Los Angeles, CA", country: "USA", lat: 34.0522, lng: -118.2437, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Santería Practices", city: "Newark, NJ", country: "USA", lat: 40.7357, lng: -74.1724, category: "afrocaribbean", source: "NJ.com"},
            // AFRO-CARIBBEAN - ADDITIONAL CUBA (3)
            {name: "Santería Practices", city: "Matanzas", country: "Cuba", lat: 23.0414, lng: -81.5775, category: "afrocaribbean", source: "Wikipedia; Anywhere"},
            {name: "Santería Practices", city: "Cienfuegos", country: "Cuba", lat: 22.1465, lng: -80.4361, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Santería Practices", city: "Camagüey", country: "Cuba", lat: 21.3809, lng: -77.9169, category: "afrocaribbean", source: "Wikipedia"},
            // AFRO-CARIBBEAN - ADDITIONAL BRAZIL (3)
            {name: "Candomblé Terreiros", city: "São Paulo", country: "Brazil", lat: -23.5505, lng: -46.6333, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Candomblé Terreiros", city: "Recife", country: "Brazil", lat: -8.0476, lng: -34.8770, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Candomblé Terreiros", city: "Fortaleza", country: "Brazil", lat: -3.7172, lng: -38.5434, category: "afrocaribbean", source: "Wikipedia"},
            // AFRO-CARIBBEAN - ADDITIONAL HAITI (2)
            {name: "Vodou Practices", city: "Jacmel", country: "Haiti", lat: 18.2373, lng: -72.5350, category: "afrocaribbean", source: "Wikipedia"},
            {name: "Vodou Practices", city: "Les Cayes", country: "Haiti", lat: 18.2000, lng: -73.7500, category: "afrocaribbean", source: "Wikipedia"},
            // YORUBA - ADDITIONAL (1)
            {name: "Yoruba Practices", city: "Ibadan", country: "Nigeria", lat: 7.3775, lng: 3.9470, category: "yoruba", source: "Wikipedia"},
            // AFRICAN TRADITIONAL - ADDITIONAL (2)
            {name: "Shona Practices", city: "Harare", country: "Zimbabwe", lat: -17.8252, lng: 31.0335, category: "african", source: "Academic sources"},
            {name: "Traditional Practices", city: "Maputo", country: "Mozambique", lat: -25.9655, lng: 32.5832, category: "african", source: "Academic sources"},
            // SHAMANIC - ADDITIONAL VIETNAM (4)
            {name: "Shamanic Practices", city: "Hanoi", country: "Vietnam", lat: 21.0285, lng: 105.8542, category: "shamanic", source: "Academic sources"},
            {name: "Shamanic Practices", city: "Hue", country: "Vietnam", lat: 16.4637, lng: 107.5909, category: "shamanic", source: "Academic sources"},
            {name: "Shamanic Practices", city: "Mekong Delta", country: "Vietnam", lat: 10.0000, lng: 105.7500, category: "shamanic", source: "Academic sources"},
            {name: "Shamanic Practices", city: "Central Highlands", country: "Vietnam", lat: 12.2500, lng: 108.0000, category: "shamanic", source: "Academic sources"},
            // SHAMANIC - ADDITIONAL CHINA/KOREA (2)
            {name: "Minority Practices", city: "Yunnan", country: "China", lat: 25.0000, lng: 101.0000, category: "shamanic", source: "Academic sources"},
            {name: "Mudang Kut", city: "Jeju Island", country: "South Korea", lat: 33.4890, lng: 126.4983, category: "shamanic", source: "Wikipedia"},
            // ORTHODOX - ADDITIONAL (3)
            {name: "Kourbania Practice", city: "Thessaloniki", country: "Greece", lat: 40.6401, lng: 22.9444, category: "orthodox", source: "Wikipedia"},
            {name: "Kourbania Practice", city: "Athens", country: "Greece", lat: 37.9838, lng: 23.7275, category: "orthodox", source: "Wikipedia"},
            {name: "Kourbania Practice", city: "Crete", country: "Greece", lat: 35.2401, lng: 24.8093, category: "orthodox", source: "Wikipedia"},
            // ARMENIAN - ADDITIONAL (1)
            {name: "Matagh Ceremonies", city: "Garni Temple", country: "Armenia", lat: 40.1125, lng: 44.7297, category: "armenian", source: "Wikipedia"},
            // CHINESE - ADDITIONAL (4)
            {name: "Xiahai City God", city: "Taipei", country: "Taiwan", lat: 25.0330, lng: 121.5654, category: "chinese", source: "Wikipedia"},
            {name: "Temple Practices", city: "Tainan", country: "Taiwan", lat: 22.9908, lng: 120.2133, category: "chinese", source: "Wikipedia"},
            {name: "Folk Religion", city: "Fujian", country: "China", lat: 26.0000, lng: 119.0000, category: "chinese", source: "Academic sources"},
            {name: "Folk Religion", city: "Guangdong", country: "China", lat: 23.0000, lng: 113.5000, category: "chinese", source: "Academic sources"},
            // MALAGASY - ADDITIONAL (2)
            {name: "Famadihana Rituals", city: "Mahajanga", country: "Madagascar", lat: -15.7167, lng: 46.3167, category: "malagasy", source: "Wikipedia"},
            {name: "Famadihana Rituals", city: "Toliara", country: "Madagascar", lat: -23.3500, lng: 43.6667, category: "malagasy", source: "Wikipedia"},
            // ANDEAN - ADDITIONAL (2)
            {name: "Pachamama Rituals", city: "Lima", country: "Peru", lat: -12.0464, lng: -77.0428, category: "andean", source: "Wikipedia"},
            {name: "Pachamama Rituals", city: "Ayacucho", country: "Peru", lat: -13.1631, lng: -74.2236, category: "andean", source: "Wikipedia"}
        ];
        
        document.getElementById('loading').style.display = 'none';
        
        const map = L.map('map', {
            center: [20, 0],
            zoom: 2,
            minZoom: 2,
            maxZoom: 18
        });
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);
        
        const markers = {};
        const allMarkers = [];
        
        locations.forEach(loc => {
            const icon = L.divIcon({
                className: `custom-marker marker-${loc.category}`,
                iconSize: [12, 12]
            });
            
            const popup = `
                <div class="popup-title">${loc.name}
                <div class="popup-location">${loc.city}, ${loc.country}
                <div class="popup-sources">Sources: ${loc.source}
            `;
            
            const marker = L.marker([loc.lat, loc.lng], { icon })
                .bindPopup(popup);
            
            if (!markers[loc.category]) markers[loc.category] = [];
            markers[loc.category].push(marker);
            allMarkers.push(marker);
            marker.addTo(map);
        });
        
        const categories = [
            { id: 'all', label: 'All' },
            { id: 'islamic', label: 'Islamic' },
            { id: 'hindu', label: 'Hindu' },
            { id: 'afrocaribbean', label: 'Afro-Caribbean' },
            { id: 'yoruba', label: 'Yoruba' },
            { id: 'jewish', label: 'Jewish' },
            { id: 'african', label: 'African' },
            { id: 'pacific', label: 'Pacific' },
            { id: 'shamanic', label: 'Shamanic' },
            { id: 'chinese', label: 'Chinese' },
            { id: 'orthodox', label: 'Orthodox' },
            { id: 'armenian', label: 'Armenian' },
            { id: 'malagasy', label: 'Malagasy' },
            { id: 'andean', label: 'Andean' },
            { id: 'mongolian', label: 'Mongolian' },
            { id: 'shinto', label: 'Shinto' }
        ];
        
        const filterDiv = document.getElementById('filters');
        categories.forEach(cat => {
            const btn = document.createElement('button');
            btn.className = 'filter-btn' + (cat.id === 'all' ? ' active' : '');
            btn.textContent = cat.label;
            btn.onclick = () => filterCategory(cat.id, btn);
            filterDiv.appendChild(btn);
        });
        
        function filterCategory(category, btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            allMarkers.forEach(m => map.removeLayer(m));
            if (category === 'all') {
                allMarkers.forEach(m => m.addTo(map));
                document.getElementById('count').textContent = locations.length;
            } else if (markers[category]) {
                markers[category].forEach(m => m.addTo(map));
                document.getElementById('count').textContent = markers[category].length;
            }
        }
    </script>
</body>
</html>
